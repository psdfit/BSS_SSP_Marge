<div>
    <mat-card>
        <mat-card-content>
            <div fxLayoutAlign="space-around space-around" fxLayout="column">
                <mat-toolbar color="accent" class="mat-elevation-z8 slim slim">
                    <mat-icon class="material-icons">view_comfy</mat-icon>
                    <span class="spacer">Pending Approvals</span>
                    <div class="spacer"></div>
                    <!--<input type="text" placeholder="Search" (keyup)="applyFilter($event.target.value)" class="search" />-->
                </mat-toolbar>
                <!--<button (click)="OK()">click</button>-->

                <div class="text-center" *ngIf="!tsps">
                    <p>No Pending Approval</p>
                </div>
                <!--    <div class="row">
                    <div class="col-sm-3">
                        <mat-form-field fxFlex>
                            <mat-select placeholder="Status"
                                      
                                        id="Status"
                                        matInput
                                        required>
                                <mat-optgrp disabled
                                            class="ddlsrchheader">
                                    <input type="text"
                                           (keydown)="$event.stopPropagation()"
                                           [formControl]="SearchStatus">
                                </mat-optgrp>

                                <mat-option value="All"> -- All -- </mat-option>
                                <mat-option value="Pending" selected>Pending</mat-option>
                                <mat-option value="Approved">Approved</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div> -->
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <thead>
                            <tr>
                                <th>Sr#</th>
                                <th>Action</th>
                                <th></th>
                                <th>TSP Name</th>
                                <th>Address</th>
                                <th>Head Name</th>
                                <th>Head Designation</th>
                                <th>Head Email</th>
                                <th>Head Landline</th>
                                <th>Contact Person Name</th>
                                <th>Contact Person Designation</th>
                                <th>Contact Person Landline</th>
                                <th>Contact Person Email</th>
                                <!--<th>Bank Name</th>-->
                                <th>Bank Account Number</th>
                                <th>Account Title</th>
                                <!--<th>Bank Branch</th>-->
                            </tr>
                        </thead>
                        <tbody>
                            <ng-container *ngFor="let r of tsps">
                                <tr>
                                    <td>{{r.TSPChangeRequestID}}</td>
                                    <td>
                                        <button mat-raised-button color="primary" type="button" mat-button
                                            (click)="openApprovalDialogue(r)">
                                            Decision
                                        </button>
                                        <span class="p-4 text-dark" *ngIf="r.IsApproved">Approved</span>
                                        <a color="primary" matTooltip="Check TSP current details" *ngIf="!r.IsApproved"
                                            mat-icon-button (click)="GetCurrentTspByID(r)">
                                            <mat-icon>{{r.currentTrainee ?'remove_circle':'control_point' }}</mat-icon>
                                        </a>
                                        <!--<a mat-button color="primary" (click)="openHistoryDialogue(r)">History </a>-->

                                    </td>
                                    <td style="color:orangered">Requested</td>
                                    <td [ngClass]="{'changed-field': compareFields(r, r.currentTsp, 'TSPName')}">
                                        {{r.TSPName}}</td>
                                    <td [ngClass]="{'changed-field': compareFields(r, r.currentTsp, 'Address')}">
                                        {{r.Address}}</td>
                                    <td [ngClass]="{'changed-field': compareFields(r, r.currentTsp, 'HeadName')}">
                                        {{r.HeadName}}</td>
                                    <td
                                        [ngClass]="{'changed-field': compareFields(r, r.currentTsp, 'HeadDesignation')}">
                                        {{r.HeadDesignation}}</td>
                                    <td [ngClass]="{'changed-field': compareFields(r, r.currentTsp, 'HeadEmail')}">
                                        {{r.HeadEmail}}</td>
                                    <td [ngClass]="{'changed-field': compareFields(r, r.currentTsp, 'HeadLandline')}">
                                        {{r.HeadLandline}}</td>
                                    <td [ngClass]="{'changed-field': compareFields(r, r.currentTsp, 'CPName')}">
                                        {{r.CPName}}</td>
                                    <td [ngClass]="{'changed-field': compareFields(r, r.currentTsp, 'CPDesignation')}">
                                        {{r.CPDesignation}}</td>
                                    <td [ngClass]="{'changed-field': compareFields(r, r.currentTsp, 'CPLandline')}">
                                        {{r.CPLandline}}</td>
                                    <td [ngClass]="{'changed-field': compareFields(r, r.currentTsp, 'CPEmail')}">
                                        {{r.CPEmail}}</td>
                                    <td
                                        [ngClass]="{'changed-field': compareFields(r, r.currentTsp, 'BankAccountNumber')}">
                                        {{r.BankAccountNumber}}</td>
                                    <td [ngClass]="{'changed-field': compareFields(r, r.currentTsp, 'AccountTitle')}">
                                        {{r.AccountTitle}}</td>
                                </tr>

                                <tr *ngIf="r.currentTsp">
                                    <td colspan="26">
                                        <div class="table-responsive">
                                            <table class="table table-bordered">
                                                <thead>
                                                    <tr>
                                                        <th></th>
                                                        <th></th>
                                                        <th>TSP Name</th>
                                                        <th>Address</th>
                                                        <th>Head Name</th>
                                                        <th>Head Designation</th>
                                                        <th>Head Email</th>
                                                        <th>Head Landline</th>
                                                        <th>Contact Person Name</th>
                                                        <th>Contact Person Designation</th>
                                                        <th>Contact Person Landline</th>
                                                        <th>Contact Person Email</th>
                                                        <!--<th>Bank Name</th>-->
                                                        <th>Bank Account Number</th>
                                                        <th>Account Title</th>
                                                        <!--<th>Bank Branch</th>-->

                                                    </tr>
                                                </thead>
                                                <tbody>
                                                    <tr *ngFor="let l of r.currentTsp">
                                                        <td></td>
                                                        <td style="color:green">Existing</td>
                                                        <td>{{l.TSPName}}</td>
                                                        <td>{{l.Address}}</td>
                                                        <td>{{l.HeadName}}</td>
                                                        <td>{{l.HeadDesignation}}</td>
                                                        <td>{{l.HeadEmail}}</td>
                                                        <td>{{l.HeadLandline}}</td>
                                                        <td>{{l.CPName}}</td>
                                                        <td>{{l.CPDesignation}}</td>
                                                        <td>{{l.CPLandline}}</td>
                                                        <td>{{l.CPEmail}}</td>
                                                        <!--<td>{{l.BankName}}</td>-->
                                                        <td>{{l.BankAccountNumber}}</td>
                                                        <td>{{l.AccountTitle}}</td>
                                                        <!--<td>{{l.BankBranch}}</td>-->
                                                    </tr>
                                                </tbody>
                                            </table>
                                        </div>
                                    </td>
                                </tr>

                            </ng-container>



                        </tbody>
                    </table>
                </div>
                <!--</mat-step>-->


            </div>
        </mat-card-content>
    </mat-card>
</div>