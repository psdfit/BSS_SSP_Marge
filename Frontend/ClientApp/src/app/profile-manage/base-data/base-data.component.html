<mat-card>
  <mat-toolbar color="accent" class=" slim slim">
    <mat-icon class="material-icons"> add_circle </mat-icon>
    <span class="spacer">{{SpacerTitle}}</span>
    <button *ngIf="TapIndex==4" mat-raised-button color="accent" style="float:right;margin: 0px 7px;"
      (click)="proceedRegistrationPayment()">
      Registration Payments
    </button>
  </mat-toolbar>
  <mat-card-content>
    <mat-tab-group #tabGroup mat-align-tabs="start" dynamicHeight (selectedTabChange)="[getSelectedTabData()]">
      <mat-tab label="Training Location">
        <fieldset *ngIf="totalScore!=currentScore" class="border"
          style="padding: 3px 10px !important;margin-bottom: 5px !important;">
          <legend>Profile Completion </legend>
          <mat-progress-bar mode="determinate" [value]="progressPercentage"></mat-progress-bar>
          <p>{{currentScore}} out of {{totalScore}} completed ({{progressPercentage | number: '1.0-0'}}%)</p>
          <p *ngIf="PendingForm.length>0" class="pt-1">
            <span style="color: red;">
              Please complete the required
              form:
            </span> [{{PendingForm.join(", ")}}]
          </p>
        </fieldset>
        <form (ngSubmit)="SaveTrainingInfo()" [formGroup]="TrainingForm">
          <fieldset class="border">
            <legend>Training Location Information</legend>
            <div class="row">
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Training Location</mat-label>
                  <input formControlName="TrainingLocationName" matInput placeholder="Training Location" required />
                  <mat-error *ngFor="let error of TrainingForm.get('TrainingLocationName').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-6">
                <mat-form-field>
                  <mat-label>Training Address</mat-label>
                  <input formControlName="TrainingLocationAddress" matInput placeholder="Training Address" required />
                  <mat-error *ngFor="let error of TrainingForm.get('TrainingLocationAddress').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Latitude & Longitude</mat-label>
                  <input [readOnly]="readOnly" formControlName="GeoTagging" matInput placeholder="Latitude & Longitude"
                    required />
                  <mat-error *ngFor="let error of TrainingForm.get('GeoTagging').errors | keyvalue">
                    {{
                    getErrorMessage(error.key,
                    error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <!-- <div class="col-sm-3">
              <mat-form-field>
                <mat-label>Geo Tagging</mat-label>
                <input [readOnly]="readOnly" (keydown)="OpenMapDialogue()" formControlName="GeoTagging"
                  (click)="OpenMapDialogue()" matInput placeholder="Geo Tagging" required />
                <mat-error *ngFor="let error of TrainingForm.get('GeoTagging').errors | keyvalue">{{getErrorMessage(error.key, error.value) }}</mat-error>
              </mat-form-field>
              </div> -->
              <div class="col-sm-3" hidden>
                <mat-form-field>
                  <mat-label>Select Registration Authority</mat-label>
                  <mat-select placeholder="Select Registration Authority" formControlName="RegistrationAuthority"
                    matInput required>
                    <mat-option *ngFor="let s of registrationAuthority"
                      [value]="s.RegistrationAuthorityID">{{s.RegistrationAuthorityName}}</mat-option>
                  </mat-select>
                  <mat-error *ngFor="let error of TrainingForm.get('RegistrationAuthority').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Select Tehsil</mat-label>
                  <mat-select (openedChange)="EmptyCtrl($event)" (ngModelChange)="GetTehsil($event)"
                    placeholder="Select Tehsil" formControlName="Tehsil" matInput required>
                    <mat-optgrp class="ddlsrchheader">
                      <input placeholder="Search" (keydown)="$event.stopPropagation()" [formControl]="TSearchCtr" />
                    </mat-optgrp>
                    <mat-option *ngFor="let s of TehsilData | like:['TehsilName',TSearchCtr.value]"
                      [value]="s.TehsilID">{{s.TehsilName}}</mat-option>
                  </mat-select>
                  <mat-error style="font-size: 11px;"
                    *ngFor="let error of TrainingForm.get('Tehsil').errors | keyvalue">
                    {{
                    getErrorMessage(error.key,
                    error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Select District</mat-label>
                  <mat-select (openedChange)="EmptyCtrl($event)" placeholder="Select District"
                    formControlName="District" matInput required>
                    <mat-optgrp class="ddlsrchheader">
                      <input placeholder="Search" (keydown)="$event.stopPropagation()" [formControl]="DSearchCtr" />
                    </mat-optgrp>
                    <mat-option *ngFor="let s of DistrictData | like:['DistrictName',DSearchCtr.value]"
                      [value]="s.DistrictID">{{s.DistrictName}}</mat-option>
                  </mat-select>
                  <mat-error *ngFor="let error of TrainingForm.get('District').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Select Cluster</mat-label>
                  <mat-select (openedChange)="EmptyCtrl($event)" placeholder="Select Cluster" formControlName="Cluster"
                    matInput required>
                    <mat-optgrp class="ddlsrchheader">
                      <input placeholder="Search" (keydown)="$event.stopPropagation()" [formControl]="CSearchCtr" />
                    </mat-optgrp>
                    <mat-option *ngFor="let s of ClusterData | like:['ClusterName',CSearchCtr.value]"
                      [value]="s.ClusterID">{{s.ClusterName}}</mat-option>
                  </mat-select>
                  <mat-error *ngFor="let error of TrainingForm.get('Cluster').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Select Province</mat-label>
                  <mat-select (openedChange)="EmptyCtrl($event)" placeholder="Select Province"
                    formControlName="Province" matInput required>
                    <mat-optgrp class="ddlsrchheader">
                      <input placeholder="Search" (keydown)="$event.stopPropagation()" [formControl]="PSearchCtr" />
                    </mat-optgrp>
                    <mat-option *ngFor="let s of ProvinceData | like:['ProvinceName',PSearchCtr.value]"
                      [value]="s.ProvinceID">{{s.ProvinceName}}</mat-option>
                  </mat-select>
                  <mat-error *ngFor="let error of TrainingForm.get('Province').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
            <fieldset class="border">
              <legend>Upload Training Location Picture </legend>
              <div class="row">
                <div class="col-sm-3">
                  <mat-label class="custom-label"
                    style=" position: relative;top: 4px;font-size: 11px;font-weight: 600;left: 7px;">Upload Front Main
                    Entrance Picture</mat-label>
                  <file-upload accept="image/jpeg,image/png" formControlName="FrontMainEntrancePhoto" maxSize="1024"
                    [nopreview]="true" matInput></file-upload>
                  <mat-error style="font-size: 11px;"
                    *ngFor="let error of TrainingForm.get('FrontMainEntrancePhoto').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </div>
                <div class="col-sm-3">
                  <mat-label class="custom-label"
                    style=" position: relative;top: 4px;font-size: 11px;font-weight: 600;left: 7px;">Upload Class Room
                    Picture</mat-label>
                  <file-upload accept="image/jpeg,image/png" formControlName="ClassroomPhoto" maxSize="1024"
                    [nopreview]="true" matInput></file-upload>
                  <mat-error style="font-size: 11px;"
                    *ngFor="let error of TrainingForm.get('ClassroomPhoto').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </div>
                <div class="col-sm-3">
                  <mat-label class="custom-label"
                    style=" position: relative;top: 4px;font-size: 11px;font-weight: 600;left: 7px;">Upload Practical
                    Area Picture</mat-label>
                  <file-upload accept="image/jpeg,image/png" formControlName="PracticalAreaPhoto" maxSize="1024"
                    [nopreview]="true" matInput></file-upload>
                  <mat-error style="font-size: 11px;"
                    *ngFor="let error of TrainingForm.get('PracticalAreaPhoto').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </div>
                <div class="col-sm-3">
                  <mat-label class="custom-label"
                    style=" position: relative;top: 4px;font-size: 11px;font-weight: 600;left: 7px;">Upload Computer Lab
                    Picture</mat-label>
                  <file-upload accept="image/jpeg,image/png" formControlName="ComputerLabPhoto" maxSize="1024"
                    [nopreview]="true" matInput></file-upload>
                  <mat-error style="font-size: 11px;"
                    *ngFor="let error of TrainingForm.get('ComputerLabPhoto').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </div>
                <div class="col-sm-3">
                  <mat-label class="custom-label"
                    style=" position: relative;top: 4px;font-size: 11px;font-weight: 600;left: 7px;">Upload Tools And
                    Equipments Picture</mat-label>
                  <file-upload accept="image/jpeg,image/png" formControlName="ToolsAndEquipmentsPhoto" maxSize="1024"
                    [nopreview]="true" matInput></file-upload>
                  <mat-error style="font-size: 11px;"
                    *ngFor="let error of TrainingForm.get('ToolsAndEquipmentsPhoto').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </div>
              </div>
            </fieldset>
            <!-- <div class="row">
               <div class="col-sm-3">
                  <mat-form-field>
                     <mat-label>Select Province</mat-label>
                     <mat-select (openedChange)="EmptyCtrl($event)" placeholder="Select Province"
                        formControlName="Province" (ngModelChange)="GetCluster($event)" matInput required>
                        <mat-optgrp class="ddlsrchheader"> <input placeholder="Search"
                              (keydown)="$event.stopPropagation()" [formControl]="PSearchCtr" />
                        </mat-optgrp>
                        <mat-option *ngFor="let s of ProvinceData | like:['ProvinceName',PSearchCtr.value]"
                           [value]="s.ProvinceID">{{s.ProvinceName}}</mat-option>
                     </mat-select>
                     <mat-error *ngFor="let error of TrainingForm.get('Province').errors | keyvalue">{{
                        getErrorMessage(error.key, error.value) }}
                     </mat-error>
                  </mat-form-field>
               </div>
               <div class="col-sm-3">
                  <mat-form-field>
                     <mat-label>Select Cluster</mat-label>
                     <mat-select (openedChange)="EmptyCtrl($event)" placeholder="Select Cluster"
                        formControlName="Cluster" (ngModelChange)="GetDistrict($event)" matInput required>
                        <mat-optgrp class="ddlsrchheader"> <input placeholder="Search"
                              (keydown)="$event.stopPropagation()" [formControl]="CSearchCtr" />
                        </mat-optgrp>
                        <mat-option *ngFor="let s of ClusterData | like:['ClusterName',CSearchCtr.value]"
                           [value]="s.ClusterID">{{s.ClusterName}}</mat-option>
                     </mat-select>
                     <mat-error *ngFor="let error of TrainingForm.get('Cluster').errors | keyvalue">{{
                        getErrorMessage(error.key, error.value) }}
                     </mat-error>
                  </mat-form-field>
               </div>
               <div class="col-sm-3">
                  <mat-form-field>
                     <mat-label>Select District</mat-label>
                     <mat-select (openedChange)="EmptyCtrl($event)" placeholder="Select District"
                        formControlName="District" (ngModelChange)="GetTehsil($event)" matInput required>
                        <mat-optgrp class="ddlsrchheader"> <input placeholder="Search"
                              (keydown)="$event.stopPropagation()" [formControl]="DSearchCtr" />
                        </mat-optgrp>
                        <mat-option *ngFor="let s of DistrictData | like:['DistrictName',DSearchCtr.value]"
                           [value]="s.DistrictID">{{s.DistrictName}}</mat-option>
                     </mat-select>
                     <mat-error *ngFor="let error of TrainingForm.get('District').errors | keyvalue">{{
                        getErrorMessage(error.key, error.value) }}
                     </mat-error>
                  </mat-form-field>
               </div>
               <div class="col-sm-3">
                  <mat-form-field>
                     <mat-label>Select Tehsil</mat-label>
                     <mat-select (openedChange)="EmptyCtrl($event)" placeholder="Select Tehsil"
                        formControlName="Tehsil" matInput required>
                        <mat-optgrp class="ddlsrchheader"> <input placeholder="Search"
                              (keydown)="$event.stopPropagation()" [formControl]="TSearchCtr" />
                        </mat-optgrp>
                        <mat-option *ngFor="let s of TehsilData | like:['TehsilName',TSearchCtr.value]"
                           [value]="s.TehsilID">{{s.TehsilName}}</mat-option>
                     </mat-select>
                     <mat-error style="font-size: 11px;"
                        *ngFor="let error of TrainingForm.get('Tehsil').errors | keyvalue">{{
                        getErrorMessage(error.key,
                        error.value) }}
                     </mat-error>
                  </mat-form-field>
               </div>
            </div> -->
            <div class="row" style="float:right">
              <div class="col-sm-12">
                <button color="primary" mat-raised-button>
                  <i class="fas fa-check"></i> {{savebtn}} Record
                </button> |
                <button color="warn" type="reset" matTooltip="Click to Reset form data" (click)="ResetFrom()"
                  mat-raised-button>
                  <i class="fas fa-times"></i>
                  Reset
                </button> |
                <a color="accent" (click)="NextTap()" mat-raised-button>
                  <i class="fa fa-arrow-right"></i>
                  Next
                </a>
              </div>
            </div>
          </fieldset>
        </form>
        <mat-divider>
        </mat-divider>
        <!-- record list start -->
        <mat-toolbar color="accent" class=" slim slim">
          <mat-icon class="material-icons"> view_comfy </mat-icon>
          <span class="spacer">Manage and View All</span>
          <input placeholder="Search" (keyup)="applyFilter(TrainingTablesData,$event)" class="search" />
          <!-- <button mat-raised-button  style="float:right;margin: 0px 7px;background: #c3d9ff" (click)="DataExcelExport(TrainingTablesData.filteredData,'Training Location')">
          <i class="fas fa-file-export"></i> Export Excel</button> -->
        </mat-toolbar>
        <div class="table-responsive">
          <mat-table [dataSource]="TrainingTablesData" #TrainingSort="matSort" matSort>
            <ng-container *ngFor="let column of TrainingTableColumns" [matColumnDef]="column">
              <mat-header-cell *matHeaderCellDef mat-sort-header>{{ camelCaseToWords(column) }}</mat-header-cell>
              <mat-cell *matCellDef="let row">
                <ng-container
                  *ngIf="column !='TrainingLocationName' && column !='ToolsAndEquipments' && column !='ComputerLab' && column !='PracticalArea'  && column !='Classroom' && column !='FrontMainEntrance' ">
                  &nbsp;{{ row[column] }}</ng-container>
                <ng-container *ngIf="column === 'TrainingLocationName' && (row['PaymentStatus'] === 'UNPAID')">
                  <span (click)="EditTrainingLocation(row)" matTooltip="Click to proceed edit"
                    style="color: #005b9e; text-decoration: underline; cursor: pointer;">
                    <strong>{{ row[column] }}</strong>
                  </span>
                </ng-container>
                <ng-container *ngIf="column === 'TrainingLocationName' && (row['PaymentStatus'] == 'PAID')">
                  <span matTooltip="This training location is currently locked."
                    style="color: #727475; text-decoration: underline; cursor: pointer;">
                    <strong>{{ row[column] }}</strong>
                  </span>
                </ng-container>
                <ng-container
                  *ngIf="column =='ToolsAndEquipments' || column =='ComputerLab' || column =='PracticalArea'  || column =='Classroom' || column =='FrontMainEntrance'">
                  &nbsp;
                  <a style="cursor: pointer;" (click)="ShowPreview( row[column])" color="primary"
                    matTooltip="Preview document" class="file-lable">
                    <mat-icon>get_app</mat-icon>
                  </a>
                </ng-container>
              </mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="TrainingTableColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: TrainingTableColumns;"></mat-row>
          </mat-table>
          <mat-paginator [pageSize]="10" #TrainingPaginator="matPaginator"
            [pageSizeOptions]="[5,10,20, 100]"></mat-paginator>
        </div>
      </mat-tab>
      <mat-tab label="Training Certificate">
        <fieldset *ngIf="totalScore!=currentScore" class="border"
          style="padding: 3px 10px !important;margin-bottom: 5px !important;">
          <legend>Profile Completion </legend>
          <mat-progress-bar mode="determinate" [value]="progressPercentage"></mat-progress-bar>
          <p>{{currentScore}} out of {{totalScore}} completed ({{progressPercentage | number: '1.0-0'}}%)</p>
          <p *ngIf="PendingForm.length>0" class="pt-1">
            <span style="color: red;">
              Please complete the required
              form:
            </span> [{{PendingForm.join(", ")}}]
          </p>
        </fieldset>
        <form (ngSubmit)="SaveCertificateInfo()" [formGroup]="Certificate">
          <fieldset class="border">
            <legend>Training Certificate Information</legend>
            <div class="row">
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Select Training Location</mat-label>
                  <mat-select placeholder="Select Training Location" formControlName="TrainingLocationID" matInput
                    required>
                    <mat-option *ngFor="let s of TrainingLocation"
                      [value]="s.TrainingLocationID">{{s.TrainingLocationName}}</mat-option>
                  </mat-select>
                  <mat-error *ngFor="let error of Certificate.get('TrainingLocationID').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Select Registration Authority</mat-label>
                  <mat-select placeholder="Select Registration Authority" formControlName="RegistrationAuthority"
                    matInput required>
                    <mat-option *ngFor="let s of registrationAuthority"
                      [value]="s.RegistrationAuthorityID">{{s.RegistrationAuthorityName}}</mat-option>
                  </mat-select>
                  <mat-error *ngFor="let error of Certificate.get('RegistrationAuthority').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Select Registration Status</mat-label>
                  <mat-select placeholder="Select Registration Status" formControlName="RegistrationStatus" matInput
                    required>
                    <mat-option *ngFor="let s of RegistrationStatus"
                      [value]="s.RegistrationStatusID">{{s.RegistrationStatus}}</mat-option>
                  </mat-select>
                  <mat-error *ngFor="let error of Certificate.get('RegistrationStatus').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3" *ngIf="Certificate.get('RegistrationStatus').value != 3">
                <mat-form-field>
                  <mat-label>Registration Certificate No.</mat-label>
                  <input formControlName="RegistrationCerNum" matInput placeholder="Registration Certificate No."
                    required />
                  <mat-error *ngFor="let error of Certificate.get('RegistrationCerNum').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Issuance Date</mat-label>
                  <input formControlName="IssuanceDate" [max]="maxDate" [matDatepicker]="IssuanceDate" readonly matInput
                    required>
                  <mat-datepicker-toggle matSuffix [for]="IssuanceDate"></mat-datepicker-toggle>
                  <mat-datepicker #IssuanceDate disabled="false"></mat-datepicker>
                  <mat-error *ngFor="let error of Certificate.get('IssuanceDate').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3" *ngIf="Certificate.get('RegistrationStatus').value != 3">
                <mat-form-field>
                  <mat-label>Expiry Date</mat-label>
                  <input formControlName="ExpiryDate" [max]="maxDate" [matDatepicker]="ExpiryDate" readonly matInput
                    required>
                  <mat-datepicker-toggle matSuffix [for]="ExpiryDate"></mat-datepicker-toggle>
                  <mat-datepicker #ExpiryDate disabled="false"></mat-datepicker>
                  <mat-error *ngFor="let error of Certificate.get('ExpiryDate').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-label class="custom-label"
                  style=" position: relative;top: 4px;font-size: 11px;font-weight: 600;left: 7px;">
                  Registration
                  Certificate Evidence
                </mat-label>
                <file-upload accept="application/pdf,image/jpeg,image/png" formControlName="RegistrationCerEvidence"
                  maxSize="1024" [nopreview]="true" matInput></file-upload>
                <mat-error style="font-size: 11px;"
                  *ngFor="let error of Certificate.get('RegistrationCerEvidence').errors | keyvalue">
                  {{
                  getErrorMessage(error.key, error.value)
                  }}
                </mat-error>
              </div>
            </div>
            <div class="row" style="float:right">
              <div class="col-sm-12">
                <a (click)="PreviousTap()" mat-raised-button><i class="fa fa-arrow-left"></i> Previous</a> |
                <button color="primary" mat-raised-button>
                  <i class="fas fa-check"></i> {{savebtn}} Record
                </button> |
                <button color="warn" type="reset" matTooltip="Click to Reset form data" (click)="ResetFrom()"
                  mat-raised-button>
                  <i class="fas fa-times"></i>
                  Reset
                </button>|
                <a color="accent" (click)="NextTap()" mat-raised-button>
                  <i class="fa fa-arrow-right"></i>
                  Next
                </a>
              </div>
            </div>
          </fieldset>
        </form>
        <!-- record list start -->
        <mat-toolbar color="accent" class=" slim slim">
          <mat-icon class="material-icons"> view_comfy </mat-icon>
          <span class="spacer">Manage and View All</span>
          <input placeholder="Search" (keyup)="applyFilter(CertificateTablesData,$event)" class="search" />
          <!-- <button mat-raised-button  style="float:right;margin: 0px 7px;background: #c3d9ff" (click)="DataExcelExport(CertificateTablesData.filteredData,'Training Location Certificate')">
          <i class="fas fa-file-export"></i> Export Excel</button> -->
        </mat-toolbar>
        <div class="table-responsive">
          <mat-table [dataSource]="CertificateTablesData" #CertificateSort="matSort" matSort>
            <ng-container *ngFor="let column of CertificateTableColumns" [matColumnDef]="column">
              <mat-header-cell *matHeaderCellDef mat-sort-header>{{ camelCaseToWords(column) }}</mat-header-cell>
              <mat-cell *matCellDef="let row">
                <ng-container
                  *ngIf="column !='TrainingLocationName' && column !='ExpiryDate' && column !='IssuanceDate' && column !='RegistrationCertificateEvidence'">
                  &nbsp;{{ row[column] }}
                </ng-container>
               

                <ng-container *ngIf="column === 'TrainingLocationName' && (row['TotalMappedTrade'] != 0)">
                  &nbsp;
                  <span  matTooltip="This training Certificate currently locked."
                    style="color: #5a5c5e;text-decoration: underline;cursor: pointer;">
                    <strong>{{ row[column] }}</strong>
                  </span>
                </ng-container>
                <ng-container *ngIf="column === 'TrainingLocationName' && (row['TotalMappedTrade'] == 0)">
                  &nbsp;
                  <span (click)="EditCertificationDetail(row)"
                    style="color: #005b9e;text-decoration: underline;cursor: pointer;">
                    <strong>{{ row[column] }}</strong>
                  </span>
                </ng-container>

                <ng-container *ngIf="column =='IssuanceDate'">
                  &nbsp; {{ row[column] | date:environment.DateFormat }}
                </ng-container>
                <ng-container *ngIf="column =='ExpiryDate' && row[column] !='---'">
                  &nbsp; {{ row[column] | date:environment.DateFormat }}
                </ng-container>
                <ng-container *ngIf="column =='ExpiryDate' && row[column] =='---'">
                  &nbsp; {{ row[column] }}
                </ng-container>
                <ng-container *ngIf="column =='RegistrationCertificateEvidence'">
                  &nbsp;
                  <a style="cursor: pointer;" (click)="ShowPreview( row[column])" color="primary"
                    matTooltip="Preview document" class="file-lable">
                    <mat-icon>get_app</mat-icon>
                  </a>
                </ng-container>
              </mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="CertificateTableColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: CertificateTableColumns;"></mat-row>
          </mat-table>
          <mat-paginator [pageSize]="10" #CertificatePaginator="matPaginator"
            [pageSizeOptions]="[5,10,20, 100]"></mat-paginator>
        </div>
      </mat-tab>
      <mat-tab label="Training Certificate Mapping">
        <fieldset *ngIf="totalScore!=currentScore" class="border"
          style="padding: 3px 10px !important;margin-bottom: 5px !important;">
          <legend>Profile Completion </legend>
          <mat-progress-bar mode="determinate" [value]="progressPercentage"></mat-progress-bar>
          <p>{{currentScore}} out of {{totalScore}} completed ({{progressPercentage | number: '1.0-0'}}%)</p>
          <p *ngIf="PendingForm.length>0" class="pt-1">
            <span style="color: red;">
              Please complete the required
              form:
            </span> [{{PendingForm.join(", ")}}]
          </p>
        </fieldset>
        <form (ngSubmit)="SaveTradeInfo()" [formGroup]="TradeForm">
          <fieldset class="border">
            <legend>Training Certificate Mapping Information</legend>
            <div class="row">
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Select Training Location</mat-label>
                  <mat-select placeholder="Select Training Location" formControlName="TrainingLocationID" matInput
                    required>
                    <mat-option *ngFor="let s of TrainingLocation"
                      [value]="s.TrainingLocationID">{{s.TrainingLocationName}}</mat-option>
                  </mat-select>
                  <mat-error *ngFor="let error of TradeForm.get('TrainingLocationID').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Select Training Certificate</mat-label>
                  <mat-select placeholder="Select Training Certificate" formControlName="CertificateID" matInput
                    required>
                    <mat-option *ngFor="let s of Certification"
                      [value]="s.TrainingCertificationID">{{s.RegistrationCerNum}}-{{s.RegistrationAuthorityName}}</mat-option>
                  </mat-select>
                  <mat-error *ngFor="let error of TradeForm.get('CertificateID').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-6">
                <mat-form-field>
                  <mat-label>Select Trade</mat-label>
                  <mat-select placeholder="Select Trade" formControlName="TradeID" matInput required>
                    <mat-optgrp class="ddlsrchheader">
                      <input placeholder="Search" (keydown)="$event.stopPropagation()" [formControl]="TSearchCtr" />
                    </mat-optgrp>
                    <!-- <mat-option  [value]=0>Other</mat-option> -->
                    <mat-option *ngFor="let s of Trade | like:['TradeName',TSearchCtr.value]" [value]="s.TradeID"
                      [matTooltip]="s.TradeName">{{s.TradeName}}</mat-option>
                  </mat-select>
                  <mat-error *ngFor="let error of TradeForm.get('TradeID').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Trade Per Certificate </mat-label>
                  <input formControlName="TradeAsPerCer" matInput placeholder="Trade Per Certificate" required />
                  <mat-error *ngFor="let error of TradeForm.get('TradeAsPerCer').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Training Duration (Months) </mat-label>
                  <input formControlName="TrainingDuration" matInput placeholder="Training Duration (Months)"
                    NumberPercent required />
                  <mat-error *ngFor="let error of TradeForm.get('TrainingDuration').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Morning Total Classes</mat-label>
                  <input formControlName="NoOfClassMor" NumberOnly matInput placeholder="Morning Total Classes"
                    required />
                  <mat-error *ngFor="let error of TradeForm.get('NoOfClassMor').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Morning Class Capacity </mat-label>
                  <input formControlName="ClassCapacityMor" NumberOnly matInput placeholder="Morning Class Capacity"
                    required />
                  <mat-error *ngFor="let error of TradeForm.get('ClassCapacityMor').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Evening Total Classes </mat-label>
                  <input formControlName="NoOfClassEve" NumberOnly matInput placeholder="Evening Total Classes"
                    required />
                  <mat-error *ngFor="let error of TradeForm.get('ClassCapacityMor').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Evening Class Capacity </mat-label>
                  <input formControlName="ClassCapacityEve" NumberOnly matInput placeholder="Evening Class Capacity"
                    required />
                  <mat-error *ngFor="let error of TradeForm.get('ClassCapacityEve').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
            <div class="row" style="float:right">
              <div class="col-sm-12">
                <a (click)="PreviousTap()" mat-raised-button><i class="fa fa-arrow-left"></i> Previous</a> |
                <button color="primary" mat-raised-button>
                  <i class="fas fa-check"></i> {{savebtn}} Record
                </button> |
                <button color="warn" type="reset" matTooltip="Click to Reset form data" (click)="ResetFrom()"
                  mat-raised-button>
                  <i class="fas fa-times"></i>
                  Reset
                </button> |
                <a color="accent" (click)="NextTap()" mat-raised-button>
                  <i class="fa fa-arrow-right"></i>
                  Next
                </a>
              </div>
            </div>
          </fieldset>
        </form>
        <mat-divider>
        </mat-divider>
        <!-- record list start -->
        <mat-toolbar color="accent" class=" slim slim">
          <mat-icon class="material-icons"> view_comfy </mat-icon>
          <span class="spacer">Manage and View All</span>
          <input placeholder="Search" (keyup)="applyFilter(TradeTablesData,$event)" class="search" />
        </mat-toolbar>
        <div class="table-responsive">
          <mat-table [dataSource]="TradeTablesData" #TradeSort="matSort" matSort>
            <ng-container *ngFor="let column of TradeMapTableColumns" [matColumnDef]="column">
              <mat-header-cell *matHeaderCellDef mat-sort-header>{{ camelCaseToWords(column) }}</mat-header-cell>
              <mat-cell *matCellDef="let row">
                <ng-container *ngIf="column !='TradeName' && column !='CreatedDate' && column !='ApprovalStatus'">
                  &nbsp;{{
                  row[column]
                  }}
                </ng-container>
                <ng-container
                  *ngIf="column =='TradeName' && (row['ApprovalStatus'] !== 'Accepted' ||  row['PaymentStatus'] === 'UNPAID')">
                  &nbsp;
                  <span (click)="EditTradeMapping(row)"
                    style="color: #005b9e;text-decoration: underline;cursor: pointer;">
                    <strong>{{ row[column] }}</strong>
                  </span>
                </ng-container>
                <ng-container
                  *ngIf="column =='TradeName' && (row['ApprovalStatus'] === 'Accepted' && row['PaymentStatus'] === 'PAID')">
                  &nbsp;
                  <span style="color: #424242;text-decoration: underline;cursor: pointer;">
                    <strong>{{ row[column] }}</strong>
                  </span>
                </ng-container>
                <ng-container *ngIf="column =='ApprovalStatus'">
                  <span *ngIf="row[column]=='On-Hold'" class="label label-default">{{row[column]}}</span>
                  <span *ngIf="row[column]=='In-Progress'" class="label label-info">{{row[column]}}</span>
                  <span *ngIf="row[column]=='Accepted'" class="label label-success">{{row[column]}}</span>
                  <span *ngIf="row[column]=='Pending'" class="label label-warning">{{row[column]}}</span>
                  <span *ngIf="row[column]=='Rejected'" class="label label-danger">{{row[column]}}</span>
                  <span *ngIf="row[column]=='Send-Back'" class="label label-danger">{{row[column]}}</span>
                </ng-container>
                <ng-container *ngIf="column =='CreatedDate'">
                  &nbsp; {{ row[column] | date:environment.DateFormat }}
                </ng-container>
              </mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="TradeMapTableColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: TradeMapTableColumns;"></mat-row>
          </mat-table>
          <mat-paginator [pageSize]="10" #TradePaginator="matPaginator"
            [pageSizeOptions]="[5,10,20, 100]"></mat-paginator>
        </div>
      </mat-tab>
      <mat-tab label="Trainer Profile">
        <fieldset *ngIf="totalScore!=currentScore" class="border"
          style="padding: 3px 10px !important;margin-bottom: 5px !important;">
          <legend>Profile Completion </legend>
          <mat-progress-bar mode="determinate" [value]="progressPercentage"></mat-progress-bar>
          <p>{{currentScore}} out of {{totalScore}} completed ({{progressPercentage | number: '1.0-0'}}%)</p>
          <p *ngIf="PendingForm.length>0" class="pt-1">
            <span style="color: red;">
              Please complete the required
              form:
            </span> [{{PendingForm.join(", ")}}]
          </p>
        </fieldset>
        <form (ngSubmit)="SaveTrainerInfo()" [formGroup]="TrainerForm">
          <fieldset class="border">
            <legend>Trainer Profile Information</legend>
            <div class="row">
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Trainer Name</mat-label>
                  <input formControlName="TrainerName" matInput placeholder="Trainer Name" required />
                  <mat-error *ngFor="let error of TrainerForm.get('TrainerName').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Trainer Mobile#</mat-label>
                  <input formControlName="TrainerMobile" [imask]="{mask:'0000-0000000'}" [unmask]="false" matInput
                    placeholder="Trainer Mobile#" required />
                  <mat-error *ngFor="let error of TrainerForm.get('TrainerMobile').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Trainer Email</mat-label>
                  <input formControlName="TrainerEmail" type="email" matInput placeholder="Trainer Email" required />
                  <mat-error *ngFor="let error of TrainerForm.get('TrainerEmail').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-select placeholder="Select Gender" formControlName="Gender" matInput required>
                    <mat-option *ngFor="let s of Gender" [value]="s.GenderID">{{s.GenderName}}</mat-option>
                  </mat-select>
                  <mat-error *ngFor="let error of TrainerForm.get('Gender').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
            <div class="row">
              <div class="col-sm-4">
                <mat-form-field>
                  <mat-label>Trainer CNIC#</mat-label>
                  <input formControlName="TrainerCNIC" [imask]="{mask:'00000-0000000-0'}" [unmask]="false" matInput
                    placeholder="Trainer CNIC#" required />
                  <mat-error *ngFor="let error of TrainerForm.get('TrainerCNIC').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-4">
                <mat-label class="custom-label"
                  style=" position: relative;top: 4px;font-size: 11px;font-weight: 600;left: 7px;">
                  CNIC Front
                  Photo
                </mat-label>
                <file-upload accept="application/pdf,image/jpeg,image/png"  formControlName="CnicFrontPhoto"
                  maxSize="1024" [nopreview]="true" matInput></file-upload>
                <mat-error style="font-size: 11px;"
                  *ngFor="let error of TrainerForm.get('CnicFrontPhoto').errors | keyvalue">
                  {{
                  getErrorMessage(error.key, error.value)
                  }}
                </mat-error>
              </div>
              <div class="col-sm-4">
                <mat-label class="custom-label"
                  style=" position: relative;top: 4px;font-size: 11px;font-weight: 600;left: 7px;">
                  CNIC Back
                  Photo
                </mat-label>
                <file-upload accept="application/pdf,image/jpeg,image/png" formControlName="CnicBackPhoto"
                  maxSize="1024" [nopreview]="true" matInput></file-upload>
                <mat-error style="font-size: 11px;"
                  *ngFor="let error of TrainerForm.get('CnicBackPhoto').errors | keyvalue">
                  {{
                  getErrorMessage(error.key,
                  error.value)
                  }}
                </mat-error>
              </div>
              <div class="col-sm-4">
                <mat-form-field>
                  <mat-select placeholder="Select Qualification" formControlName="Qualification" matInput required>
                    <mat-option *ngFor="let s of EducationTypes"
                      [value]="s.EducationTypeID">{{s.Education}}</mat-option>
                  </mat-select>
                  <mat-error *ngFor="let error of TrainerForm.get('Qualification').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-4">
                <mat-label class="custom-label"
                  style=" position: relative;top: 4px;font-size: 11px;font-weight: 600;left: 7px;">
                  Qual.
                  Evidence
                </mat-label>
                <file-upload accept="application/pdf,image/jpeg,image/png" formControlName="QualEvidence" maxSize="1024"
                  [nopreview]="true" matInput></file-upload>
                <mat-error style="font-size: 11px;"
                  *ngFor="let error of TrainerForm.get('QualEvidence').errors | keyvalue">
                  {{
                  getErrorMessage(error.key,
                  error.value)
                  }}
                </mat-error>
              </div>
              <div class="col-sm-4">
                <mat-label class="custom-label"
                  style=" position: relative;top: 4px;font-size: 11px;font-weight: 600;left: 7px;">
                  Trainer
                  CV
                </mat-label>
                <file-upload accept="application/pdf,image/jpeg,image/png" formControlName="TrainerCV" maxSize="1024"
                  [nopreview]="true" matInput></file-upload>
                <mat-error style="font-size: 11px;"
                  *ngFor="let error of TrainerForm.get('TrainerCV').errors | keyvalue">
                  {{
                  getErrorMessage(error.key,
                  error.value)
                  }}
                </mat-error>
              </div>
            </div>
            <fieldset class="border">
              <legend>Trainer Professional Information</legend>
              <div class="table-responsive">
                <table class="table  table-bordered " formArrayName="trainerDetails">
                  <thead>
                    <tr>
                      <th><b>Action</b></th>
                      <th><b>Trade</b></th>
                      <th><b>Qualification</b></th>
                      <th><b>Certification Body</b></th>
                      <th><b>Qualification Evidence</b></th>
                      <th><b>Experience</b></th>
                      <th><b>Experience Letter</b></th>
                    </tr>
                  </thead>
                  <tbody>
                    <tr [formGroupName]="i" *ngFor="let item of trainerDetails.controls;let i=index">
                      <td style="vertical-align: middle;">
                        <a class="border-btn btn-danger" *ngIf="trainerDetails.length>1"
                          (click)="RemoveDetail(i,trainerDetails)"><i class="fas fa-times"></i></a>
                      </td>
                      <td>
                        <mat-form-field>
                          <mat-label>Select Trade</mat-label>
                          <mat-select (openedChange)="EmptyCtrl($event)" formControlName="TrainerTradeID" matInput
                            required>
                            <mat-optgrp class="ddlsrchheader">
                              <input placeholder="Search" (keydown)="$event.stopPropagation()"
                                [formControl]="TTSearchCtr" />
                            </mat-optgrp>
                            <mat-option *ngFor="let s of TspMappedTrades | like:['TradeName',TTSearchCtr.value] "
                              [value]="s.TradeID">{{s.TradeName}}</mat-option>
                            <mat-option *ngFor="let s of Trade" disabled hidden
                              [value]="s.TradeID">{{s.TradeName}}</mat-option>
                          </mat-select>
                          <mat-error *ngFor="let error of TrainerForm.get('Gender').errors | keyvalue">
                            {{
                            getErrorMessage(error.key, error.value)
                            }}
                          </mat-error>
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field>
                          <mat-label>Professional Qualification</mat-label>
                          <input formControlName="ProfQualification" matInput required />
                        </mat-form-field>
                      </td>
                      <td>
                        <mat-form-field>
                          <mat-label>Certification Body </mat-label>
                          <input formControlName="CertificateBody" matInput required />
                        </mat-form-field>
                      </td>
                      <td>
                        <div class="col-sm-12">
                          <mat-label>Prof. Qual. Evidence </mat-label>
                          <file-upload accept="application/pdf,image/jpeg,image/png" formControlName="ProfQualEvidence"
                            maxSize="1024" [nopreview]="true" matInput></file-upload>
                          <mat-icon (click)="ShowPreview(trainerEditRecord[i].QualificationEvidence)"
                            *ngIf="trainerEditRecord.length> i">get_app</mat-icon>
                        </div>
                      </td>
                      <td>
                        <mat-form-field>
                          <mat-label>Experience In Year</mat-label>
                          <input formControlName="RelExpYear" DecimelOnly matInput required />
                        </mat-form-field>
                      </td>
                      <td>
                        <div class="col-sm-12">
                          <mat-label>
                            Experience Letter
                            <mat-icon (click)="ShowPreview(trainerEditRecord[i].RelationalExpLetter)"
                              *ngIf="trainerEditRecord.length>i">get_app</mat-icon>
                          </mat-label>
                          <file-upload accept="application/pdf,image/jpeg,image/png" formControlName="RelExpLetter"
                            maxSize="1024" [nopreview]="true" matInput></file-upload>
                        </div>
                      </td>
                    </tr>
                  </tbody>
                  <tfoot>
                    <tr>
                      <td colspan="8">
                        <a (click)="AddTrainerDetails()" color="primary" mat-raised-button>+ Add</a>
                      </td>
                    </tr>
                  </tfoot>
                </table>
              </div>
            </fieldset>
            <div class="row" style="float:right">
              <div class="col-sm-12">
                <a (click)="PreviousTap()" mat-raised-button><i class="fa fa-arrow-left"></i> Previous</a> |
                <button color="primary" mat-raised-button [disabled]="TspMappedTrades.length==0">
                  <i class="fas fa-check"></i> {{savebtn}} Record
                </button> |
                <button color="warn" type="reset" matTooltip="Click to Reset form data" (click)="ResetFrom()"
                  mat-raised-button>
                  <i class="fas fa-times"></i>
                  Reset
                </button> |
                <a color="accent" (click)="NextTap()" mat-raised-button>
                  <i class="fa fa-arrow-right"></i>
                  Next
                </a>
              </div>
            </div>
          </fieldset>
        </form>
        <!-- record list start -->
        <mat-toolbar color="accent" class=" slim slim">
          <mat-icon class="material-icons"> view_comfy </mat-icon>
          <span class="spacer">Manage and View All</span>
          <input placeholder="Search" (keyup)="applyFilter(TrainerTablesData,$event)" class="search" />
          <!-- <button mat-raised-button  style="float:right;margin: 0px 7px;background: #c3d9ff" (click)="DataExcelExport(TrainerTablesData.filteredData,'Trainer Profile')">
          <i class="fas fa-file-export"></i> Export Excel</button> -->
        </mat-toolbar>
        <div class="table-responsive">
          <mat-table [dataSource]="TrainerTablesData" #TrainerSort="matSort" matSort>
            <ng-container *ngFor="let column of TrainerTableColumns" [matColumnDef]="column">
              <mat-header-cell *matHeaderCellDef mat-sort-header>{{ camelCaseToWords(column) }}</mat-header-cell>
              <mat-cell *matCellDef="let row">
                <ng-container
                  *ngIf="column !='TrainerName' && column !='CreatedDate'&& column !='TrainerResume' && column != 'QualificationEvidence' && column != 'FrontCNIC'  && column  != 'BackCNIC' ">
                  &nbsp;{{ row[column] }}
                </ng-container>
                <ng-container *ngIf="column =='TrainerName'">
                  &nbsp;
                  <span (click)="EditRecord(row,'TrainerID',row.TrainerID,TrainerForm)"
                    style="color: #005b9e;text-decoration: underline;cursor: pointer;">
                    <strong>{{ row[column] }}</strong>
                  </span>
                </ng-container>
                <ng-container
                  *ngIf="column =='TrainerResume' || column =='QualificationEvidence' || column =='FrontCNIC'  || column =='BackCNIC'">
                  &nbsp;
                  <a style="cursor: pointer;" (click)="ShowPreview( row[column])" color="primary"
                    matTooltip="Preview document" class="file-lable">
                    <mat-icon>get_app</mat-icon>
                  </a>
                </ng-container>
                <ng-container *ngIf="column =='CreatedDate'">
                  &nbsp; {{ row[column] | date:environment.DateFormat }}
                </ng-container>
              </mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="TrainerTableColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: TrainerTableColumns;"></mat-row>
          </mat-table>
          <mat-paginator [pageSize]="10" #TrainerPaginator="matPaginator"
            [pageSizeOptions]="[5,10,20, 100]"></mat-paginator>
        </div>
        <!-- record list end -->
      </mat-tab>
      <mat-tab label="Bank Detail">
        <fieldset *ngIf="totalScore!=currentScore" class="border"
          style="padding: 3px 10px !important;margin-bottom: 5px !important;">
          <legend>Profile Completion </legend>
          <mat-progress-bar mode="determinate" [value]="progressPercentage"></mat-progress-bar>
          <p>{{currentScore}} out of {{totalScore}} completed ({{progressPercentage | number: '1.0-0'}}%)</p>
          <p *ngIf="PendingForm.length>0" class="pt-1">
            <span style="color: red;">
              Please complete the required
              form:
            </span> [{{PendingForm.join(", ")}}]
          </p>
        </fieldset>
        <form (ngSubmit)="SaveBankInfo()" [formGroup]="BankInfoForm">
          <fieldset class="border">
            <legend>Bank Information</legend>
            <div class="row">
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Select Bank</mat-label>
                  <mat-select (openedChange)="EmptyCtrl($event)" placeholder="Select Bank" formControlName="BankName"
                    matInput required>
                    <mat-optgrp class="ddlsrchheader">
                      <input placeholder="Search" (keydown)="$event.stopPropagation()" [formControl]="BSearchCtr" />
                    </mat-optgrp>
                    <mat-option *ngFor="let s of bank | like:['BankName',BSearchCtr.value]"
                      [value]="s.BankID">{{s.BankName}}</mat-option>
                  </mat-select>
                  <mat-error *ngFor="let error of BankInfoForm.get('BankName').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3" *ngIf="readOnly!=true">
                <mat-form-field>
                  <mat-label>Other Bank {{readOnly}}</mat-label>
                  <input formControlName="OtherBank" [readonly]="readOnly" matInput placeholder="Other Bank"
                    [required]="required" />
                  <mat-error *ngFor="let error of BankInfoForm.get('OtherBank').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Account Title</mat-label>
                  <input formControlName="AccountTitle" matInput placeholder="Account Title" required />
                  <mat-error *ngFor="let error of BankInfoForm.get('AccountTitle').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Account # | IBAN #</mat-label>
                  <input formControlName="AccountNumber" matInput placeholder="Account # | IBAN #" required />
                  <mat-error *ngFor="let error of BankInfoForm.get('AccountNumber').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div class="col-sm-3">
                <mat-form-field>
                  <mat-label>Branch Code</mat-label>
                  <input formControlName="BranchCode" matInput placeholder="Branch Code" required />
                  <mat-error *ngFor="let error of BankInfoForm.get('BranchCode').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
              <div [class]="readOnly==true ?'col-sm-12':'col-sm-9'">
                <mat-form-field>
                  <mat-label>Branch Address</mat-label>
                  <input formControlName="BranchAddress" matInput placeholder="Branch Address" required />
                  <mat-error *ngFor="let error of BankInfoForm.get('BranchAddress').errors | keyvalue">
                    {{
                    getErrorMessage(error.key, error.value)
                    }}
                  </mat-error>
                </mat-form-field>
              </div>
            </div>
            <div class="row" style="float:right">
              <div class="col-sm-12">
                <a (click)="PreviousTap()" mat-raised-button><i class="fa fa-arrow-left"></i> Previous</a> |
                <button color="primary" mat-raised-button>
                  <i class="fas fa-check"></i> {{savebtn}} Record
                </button> |
                <button color="warn" type="reset" matTooltip="Click to Reset form data" (click)="ResetFrom()"
                  mat-raised-button>
                  <i class="fas fa-times"></i>
                  Reset
                </button>
              </div>
            </div>
          </fieldset>
        </form>
        <mat-divider>
        </mat-divider>
        <!-- record list start -->
        <mat-toolbar color="accent" class=" slim slim">
          <mat-icon class="material-icons"> view_comfy </mat-icon>
          <span class="spacer">Manage and View All</span>
          <input placeholder="Search" (keyup)="applyFilter(BankTablesData,$event)" class="search" />
          <!-- <button mat-raised-button  style="float:right;margin: 0px 7px;background: #c3d9ff" (click)="DataExcelExport(BankTablesData.filteredData,'Bank Detail')">
          <i class="fas fa-file-export"></i> Export Excel</button> -->
        </mat-toolbar>
        <div class="table-responsive">
          <mat-table [dataSource]="BankTablesData" #BankSort="matSort" matSort>
            <ng-container *ngFor="let column of BankTableColumns" [matColumnDef]="column">
              <mat-header-cell *matHeaderCellDef mat-sort-header>{{ camelCaseToWords(column) }}</mat-header-cell>
              <mat-cell *matCellDef="let row">
                <ng-container *ngIf="column !='Bank' && column !='CreatedDate'">
                  &nbsp; {{
                  row[column]
                  }}
                </ng-container>
                <ng-container *ngIf="column =='Bank'">
                  &nbsp;
                  <span (click)="BankEdit(row)" style="color: #005b9e;text-decoration: underline;cursor: pointer;">
                    <strong>{{ row[column] }} </strong>
                  </span> | <a color="primary" mat-button (click)="SetDefault(row)"> Set Default</a>
                </ng-container>
                <ng-container *ngIf="column =='CreatedDate'">
                  &nbsp; {{ row[column] | date:environment.DateFormat }}
                </ng-container>
              </mat-cell>
            </ng-container>
            <mat-header-row *matHeaderRowDef="BankTableColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: BankTableColumns;"></mat-row>
          </mat-table>
          <mat-paginator #BankPaginator="matPaginator" [pageSize]="10"
            [pageSizeOptions]="[5,10,20, 100]"></mat-paginator>
        </div>
        <!-- record list end -->
      </mat-tab>
    </mat-tab-group>